
A restructured overview of:

* [W3C, HTML 5.2, Editor's Draft, 3 May 2017](https://w3c.github.io/html)

## [4.3.9 Headings and sections](https://w3c.github.io/html/sections.html#headings-and-sections)

**definition of 'section'**

* a section is a container that corresponds to some nodes in the dom tree
* can have a heading associated with it
* can contain any number of further nested subsections
* **REM - implies a section hierarchy; i.e. parent-child relationship between sections**
* these are conceptual sections and don't necessarily correspond with section elements

**definition of 'outline'**

* an outline consists of one or more sections; i.e. a sequence thereof
* the element for which an outline is created is said to be the **outline's owner**
* the outline for the body element of a document is the outline of the entire document
* **REM - as a consequence, the body element is the owner of the entire document's outline**

**recap on sectioning content (SC)**

* elements included - **article, aside, nav, section**
* each SC represents an explicit section
* each SC can have a heading and an outline

**recap on heading elements (HE)**

* the **h1, h2, h3, h4, h5, h6** elements are headings that have a rank
* each heading element has a rank value associated with it
* **REM - is there a clear distinction between the terms 'heading element' and
  'heading content' (HC)?**

**relationship between HC and SC**

* the first element of HC in a SC represents the heading for that section
* user agents should provide default headings for sections that do not have
  explicit section headings
* **REM - the algorithm seems to refer to these 'default headings' as 'implied headings';
  the term 'implied heading' should be mentioned/explained here**
* e.g. "Untitled document" for body, "Navigation" for nav, "Sidebar" for aside

**section hierarchy**

* **REM - in general, each subsequent heading starts a new implied section**
* subsequent headings of equal or higher rank start new implied sections
* **REM - "previous section's parent section" is most probably not general
  enough, because you will probably have to go higher up into the hierarchy.**
* subsequent headings of lower rank start implied subsections that are
  part of the previous one.
* see also: example 27

**sectioning root (SR)**

* elements included - **blockquote, body, details, dialog, fieldset, figure, td**
* each SR can have its own outline
* sections and headings inside SRs do not contribute to the outlines of their
  ancestor SCs and SRs
* **REM - implies some cut/break of the parent-child relationship between sections**
* **REM - also implies an outline hierarchy**

**definition of 'outline depth'**

* the **outline depth** of a HC element, associated with a 'section' is the number
* of sections that are ancestors of 'section' in the outermost outline that 'section'
* **REM - what is the 'outermost outline'? the topmost/root outline?**
* **REM - the actual meaning of a 'depth' value should be similar to that of a node's
  level value, which reflects how deep into a tree of nodes a node is located.**
* **REM - case 1: take all sections and outlines into account (i.e. an absolute depth value)**
* **REM - case 2: only reflect the depth of a heading relative to the outline it is
  associated with (i.e. a relative depth value)**
* finds itself in when the outlines of its document element's are created, plus 1.
* **REM - plus 1: the deeper into the hierarchy a HC is located, the larger its depth value becomes**
* the outline depth of a HC element not associated with a section is 1
* **REM - this only includes HCs which are not part of the outline that is generated;
  e.g. h1 heading of body, if the outline of a dialog is requested. this is merely
  satisfying a theoretical issue (assign each and every heading a depth value). but then,
  why the same value as a top-level heading? use 0 and you could tell from its depth value
  that it is not part of the actual outline.**

## [4.3.9.1 Clarifications]()

* currently only a listing with no particular order

**clarification 1**

* SCs are always considered subsections of their nearest ancestor SR,
  or their nearest ancestor SC, whichever is nearest, regardless of what implied
  sections other headings may have created
* **REM - does not require a direct parent-child relationship;
  feels more like a 'contains' statement**
* **REM - does probably imply that there is no cut/break of the parent-child
  relationship between sections of different nesting level**

**clarification 2**

* authors are encouraged to explicitly wrap sections in elements of SCs, instead
  of relying on the implicit sections generated by having multiple headings in
  one element of SC; i.e. use &lt;section&gt; tags
* **REM - use section elements similar to using parentheses in arithmetic
  expression; e.g. '(A * B + C)' vs. '(A * (B + C))'**
* see also: example 25

**clarification 3**

* sections may contain headings of a rank equal to their section nesting level
* authors should use headings of the appropriate rank for the section's nesting level
* **REM - probably only relevant for nesting levels lower than or equal to 6?**
* **REM - for [compatibility reasons](http://html5doctor.com/interview-steve-faulkner-html5-editor-new-doctor/#comment-32325)**

**clarification 4**

* interactive table of content entries should forward the user to the relevant
  SC element, if the section was created for a real element, or
  to the relevant HC element, if the section was generated for a heading
* note - selecting the first section of a document must forward the user to the
  top of the document, regardles where the first heading is located
* **REM - unclear: sections are always created because of a real/existing element**
* **REM - simpler: jump to the element which caused the creation of a section**

**example 24**

* an introductory example to show what the generated outline of a simple document
  would look like.
* **REM - might be a little too 'complex' to be used as an introductory example**
* the topmost heading is associated with a paragraph located at the very bottom of the document.
* a subsection contains a child blockquote SR
* **REM - so an SR won't be completely ignored in an outline; they themselves will
  still be associated with their parent section; just their 'inner' outline won't
  contribute to their parent outline**

**example 25**

* an example related to 'clarification 2'
* additional section elements can be used to clarify the structure to avoid relying
  on implicitly generated sections

**example 26**

* an introductory example to show how a document is split into different sections

**example 27**

* an example related to default/implied headings in 'relationship between HC and SC'

## [4.3.9.2 Creating an outline](https://w3c.github.io/html/sections.html#creating-an-outline)

* algorithm for creating an outline for a SC or SR element
* defined in terms of a walk over DOM nodes in tree-order;
  visit each node when entering and exiting
* associates each dom node with a particular section and potentially a heading
* **REM - this section/chapter should only contain the algorithm itself**

* [outliner-steps](./outliner-steps.md)

* [outliner-steps](./outliner-steps-mod.md) (modified)

## [4.3.9.3 Example code fragments]()

* **REM - this section/chapter should contain sample code fragments to exemplify
  how to implement the outline algorithm**
* e.g. JavaScript example for the tree order traversal
